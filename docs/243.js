"use strict";(self.webpackChunkrust_webpack_template=self.webpackChunkrust_webpack_template||[]).push([[243],{243:(e,t,n)=>{n.r(t);var r=n(838);const o=window.location.search;let l=new URLSearchParams(o);var s="daily-"+(new Date).toISOString().slice(0,10);l.has("seed")?(s=l.get("seed"),console.log("Taking seed from url param '"+s+"'")):console.log("Using daily seed '"+s+"'");var i=void 0,u=["#FCDDFF","#FFFFCF","#D9FFDF","#D9FFFF"];function c(e,t,n){if(e.children.length>0){const t=e.insertRow(-1);for(let e=0;e<4;e++)t.insertCell(-1)}const r=e.insertRow(-1);r.insertCell(-1).innerHTML="Message";for(let e of t.clues)r.insertCell(-1).innerHTML="<b>"+e+"</b>";const o=turn_table_body.insertRow(-1);o.insertCell(-1).innerHTML="Decoded";for(let e of t.message){const t=o.insertCell(-1);n?t.innerHTML="???":(t.innerHTML=e.toString(),t.style.backgroundColor=u[e],t.style.color="black")}if(null!=t.player_guess){const e=turn_table_body.insertRow(-1);e.insertCell(-1).innerHTML="Guess";for(let n=0;n<t.player_guess.length;n++){let r=t.player_guess[n];var l=t.message[n];const o=e.insertCell(-1);var s=r.toString();r===l&&(o.style.backgroundColor=u[l],o.style.color="black",s+=" (Correct)"),o.innerHTML=s}}if(n){const e=turn_table_body.insertRow(-1);e.insertCell(-1).innerHTML="Guess";let t=[];for(let n=0;n<3;n++){e.insertCell(-1).innerHTML='<input type="text" id="input_'+n.toString()+'" inputmode="numeric" pattern="[1-4]"></input>';let r=document.getElementById("input_"+n.toString());t.push(r)}for(let e=0;e<3;e++)t[e].addEventListener("input",d(e,t)),t[e].addEventListener("keypress",g)}}function _(e){if(e){let e=parseInt(document.getElementById("input_0").value),t=parseInt(document.getElementById("input_1").value),n=parseInt(document.getElementById("input_2").value);i.next_turn(e,t,n)}else i.next_turn_noguess();const t=i.correct_guess_count();let n=JSON.parse(i.get_past_turns_json()),r=null;if(t<2&&(r=JSON.parse(i.get_current_turn_json())),function(e,t){const n=document.getElementById("turn_table_body");n.innerHTML="";for(let t of e)c(n,t,!1);null!=t&&c(n,t,!0)}(n,r),2==t){document.getElementById("correct_guess_count").innerHTML="You won in "+n.length+" turns!";const e=document.getElementById("secret_words").insertRow(-1),t=JSON.parse(i.get_secret_words());e.insertCell(-1).innerHTML="Secret words: ";for(let n of t)e.insertCell(-1).innerHTML=n}else document.getElementById("correct_guess_count").innerHTML="Correctly decoded sequences: "+t.toString()+"/2"}function a(e,t){let n=t[e];if(n.length>1)return!1;if(1==n.length){if(n[0]<"0"&&n[0]>"3")return!1;for(let r=0;r<t.length;r++)if(r!=e&&n===t[r])return!1}return!0}function d(e,t){return()=>{let n=t[e],r=n.value;var o;n.value=((o=r).length>1&&(o=o.substr(0,1)),1==o.length&&(o[0]<"0"||o[0]>"3")?"":o);let l=t.map((e=>e.value));a(e,l)?n.style.backgroundColor="":(n.style.backgroundColor="#FCBAB1",n.style.color="black")}}function g(e){13==e.keyCode&&f()}function f(){let e=[0,1,2].map((e=>document.getElementById("input_"+e.toString()))).map((e=>e.value));for(let t=0;t<e.length;t++)if(0==e[t].length||!a(t,e))return!1;return _(!0),!0}const p="fasttext_filtered.embspace";console.log("Fetching embedding "+p),fetch(p).then((e=>e.blob())).then((e=>e.arrayBuffer())).then((e=>{const t=new Uint8Array(e);(i=new r.KU(t)).new_game(s),i.next_turn_noguess(),i.next_turn_noguess(),_(!1),document.getElementById("submit").addEventListener("click",(()=>{f()}))}))},838:(e,t,n)=>{n.d(t,{KU:()=>b,h4:()=>h,r2:()=>m,ug:()=>v,Ih:()=>k,yq:()=>C,gk:()=>T,Or:()=>E});var r=n(373);e=n.hmd(e);let o=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});o.decode();let l=null;function s(){return null!==l&&l.buffer===r.memory.buffer||(l=new Uint8Array(r.memory.buffer)),l}function i(e,t){return o.decode(s().subarray(e,e+t))}const u=new Array(32).fill(void 0);u.push(void 0,null,!0,!1);let c=u.length;function _(e){c===u.length&&u.push(u.length+1);const t=c;return c=u[t],u[t]=e,t}function a(e){return u[e]}let d=0,g=new("undefined"==typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8");const f="function"==typeof g.encodeInto?function(e,t){return g.encodeInto(e,t)}:function(e,t){const n=g.encode(e);return t.set(n),{read:e.length,written:n.length}};function p(e,t,n){if(void 0===n){const n=g.encode(e),r=t(n.length);return s().subarray(r,r+n.length).set(n),d=n.length,r}let r=e.length,o=t(r);const l=s();let i=0;for(;i<r;i++){const t=e.charCodeAt(i);if(t>127)break;l[o+i]=t}if(i!==r){0!==i&&(e=e.slice(i)),o=n(o,r,r=i+3*e.length);const t=s().subarray(o+i,o+r);i+=f(e,t).written}return d=i,o}let w=null;function y(){return null!==w&&w.buffer===r.memory.buffer||(w=new Int32Array(r.memory.buffer)),w}class b{static __wrap(e){const t=Object.create(b.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();r.__wbg_client_free(e)}constructor(e){var t=function(e,t){const n=t(1*e.length);return s().set(e,n/1),d=e.length,n}(e,r.__wbindgen_malloc),n=d,o=r.client_new(t,n);return b.__wrap(o)}new_game(e){var t=p(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=d;r.client_new_game(this.ptr,t,n)}next_turn(e,t,n){r.client_next_turn(this.ptr,e,t,n)}next_turn_noguess(){r.client_next_turn_noguess(this.ptr)}get_current_turn_json(){try{const n=r.__wbindgen_add_to_stack_pointer(-16);r.client_get_current_turn_json(n,this.ptr);var e=y()[n/4+0],t=y()[n/4+1];return i(e,t)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t)}}get_past_turns_json(){try{const n=r.__wbindgen_add_to_stack_pointer(-16);r.client_get_past_turns_json(n,this.ptr);var e=y()[n/4+0],t=y()[n/4+1];return i(e,t)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t)}}correct_guess_count(){return r.client_correct_guess_count(this.ptr)>>>0}get_secret_words(){try{const n=r.__wbindgen_add_to_stack_pointer(-16);r.client_get_secret_words(n,this.ptr);var e=y()[n/4+0],t=y()[n/4+1];return i(e,t)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t)}}}function h(e,t){return _(i(e,t))}function m(e){console.log(a(e))}function v(e){!function(e){const t=a(e);(function(e){e<36||(u[e]=c,c=e)})(e)}(e)}function k(){return _(new Error)}function C(e,t){var n=p(a(t).stack,r.__wbindgen_malloc,r.__wbindgen_realloc),o=d;y()[e/4+1]=o,y()[e/4+0]=n}function T(e,t){try{console.error(i(e,t))}finally{r.__wbindgen_free(e,t)}}function E(e,t){throw new Error(i(e,t))}},373:(e,t,n)=>{var r=n.w[e.id];e.exports=r,n(838),r[""]()}}]);