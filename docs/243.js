"use strict";(self.webpackChunkrust_webpack_template=self.webpackChunkrust_webpack_template||[]).push([[243],{243:(e,t,n)=>{n.r(t);var r=n(838);const o=window.location.search;let l=new URLSearchParams(o);var s="daily-"+(new Date).toISOString().slice(0,10);l.has("seed")?(s=l.get("seed"),console.log("Taking seed from url param '"+s+"'")):console.log("Using daily seed '"+s+"'");var c=void 0,i=["#FCDDFF","#FFFFCF","#D9FFDF","#D9FFFF"];function u(e,t,n){if(e.children.length>0){const t=e.insertRow(-1);for(let e=0;e<4;e++)t.insertCell(-1)}const r=e.insertRow(-1);r.insertCell(-1).innerHTML="Message";for(let e of t.clues)r.insertCell(-1).innerHTML="<b>"+e+"</b>";const o=turn_table_body.insertRow(-1);o.insertCell(-1).innerHTML="Decoded";for(let e of t.message){const t=o.insertCell(-1);n?t.innerHTML="???":(t.innerHTML=e.toString(),t.style.backgroundColor=i[e],t.style.color="black")}if(null!=t.player_guess){const e=turn_table_body.insertRow(-1);e.insertCell(-1).innerHTML="Guess";for(let n=0;n<t.player_guess.length;n++){let r=t.player_guess[n];var l=t.message[n];const o=e.insertCell(-1);var s=r.toString();r===l&&(o.style.backgroundColor=i[l],o.style.color="black",s+=" (Correct)"),o.innerHTML=s}}if(n){const e=turn_table_body.insertRow(-1);e.insertCell(-1).innerHTML="Guess";let t=[];for(let n=0;n<3;n++){e.insertCell(-1).innerHTML='<input type="text" id="input_'+n.toString()+'" inputmode="numeric" pattern="[1-4]" placeholder="Guess 0-3">';let r=document.getElementById("input_"+n.toString());t.push(r)}for(let e=0;e<3;e++)t[e].addEventListener("input",d(t)),t[e].addEventListener("keypress",g)}}function _(e){if(e){let e=parseInt(document.getElementById("input_0").value),t=parseInt(document.getElementById("input_1").value),n=parseInt(document.getElementById("input_2").value);c.next_turn(e,t,n)}else c.next_turn_noguess();const t=c.correct_guess_count();let n=JSON.parse(c.get_past_turns_json()),r=null;if(t<2&&(r=JSON.parse(c.get_current_turn_json())),function(e,t){const n=document.getElementById("turn_table_body");n.innerHTML="";for(let t of e)u(n,t,!1);null!=t&&u(n,t,!0)}(n,r),2==t){document.getElementById("correct_guess_count").innerHTML="You won in "+n.length+" turns!";const e=document.getElementById("secret_words").insertRow(-1),t=JSON.parse(c.get_secret_words());e.insertCell(-1).innerHTML="Secret words: ";for(let n=0;n<t.length;n++){let r=t[n];const o=e.insertCell(-1);o.innerHTML=r,o.style.backgroundColor=i[n],o.style.color="black"}}else document.getElementById("correct_guess_count").innerHTML="Correctly decoded sequences: "+t.toString()+"/2"}function a(e,t){let n=t[e];if(n.length>1)return!1;if(1==n.length){if(n[0]<"0"&&n[0]>"3")return!1;for(let r=0;r<t.length;r++)if(r!=e&&n===t[r])return!1}return!0}function d(e){return()=>{for(let n=0;n<e.length;n++){let r=e[n],o=r.value;r.value=((t=o).length>1&&(t=t.substr(0,1)),1==t.length&&(t[0]<"0"||t[0]>"3")?"":t),a(n,e.map((e=>e.value)))?r.style.backgroundColor="":(r.style.backgroundColor="#FCBAB1",r.style.color="black")}var t}}function g(e){13==e.keyCode&&f()}function f(){let e=[0,1,2].map((e=>document.getElementById("input_"+e.toString()))).map((e=>e.value));for(let t=0;t<e.length;t++)if(0==e[t].length||!a(t,e))return!1;return _(!0),!0}const p="fasttext_filtered.embspace";console.log("Fetching embedding "+p),fetch(p).then((e=>e.blob())).then((e=>e.arrayBuffer())).then((e=>{const t=new Uint8Array(e);(c=new r.KU(t)).new_game(s),c.next_turn_noguess(),c.next_turn_noguess(),_(!1),document.getElementById("submit").addEventListener("click",(()=>{f()}))}))},838:(e,t,n)=>{n.d(t,{KU:()=>b,h4:()=>h,r2:()=>m,ug:()=>k,Ih:()=>v,yq:()=>C,gk:()=>T,Or:()=>E});var r=n(373);e=n.hmd(e);let o=new("undefined"==typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});o.decode();let l=null;function s(){return null!==l&&l.buffer===r.memory.buffer||(l=new Uint8Array(r.memory.buffer)),l}function c(e,t){return o.decode(s().subarray(e,e+t))}const i=new Array(32).fill(void 0);i.push(void 0,null,!0,!1);let u=i.length;function _(e){u===i.length&&i.push(i.length+1);const t=u;return u=i[t],i[t]=e,t}function a(e){return i[e]}let d=0,g=new("undefined"==typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8");const f="function"==typeof g.encodeInto?function(e,t){return g.encodeInto(e,t)}:function(e,t){const n=g.encode(e);return t.set(n),{read:e.length,written:n.length}};function p(e,t,n){if(void 0===n){const n=g.encode(e),r=t(n.length);return s().subarray(r,r+n.length).set(n),d=n.length,r}let r=e.length,o=t(r);const l=s();let c=0;for(;c<r;c++){const t=e.charCodeAt(c);if(t>127)break;l[o+c]=t}if(c!==r){0!==c&&(e=e.slice(c)),o=n(o,r,r=c+3*e.length);const t=s().subarray(o+c,o+r);c+=f(e,t).written}return d=c,o}let y=null;function w(){return null!==y&&y.buffer===r.memory.buffer||(y=new Int32Array(r.memory.buffer)),y}class b{static __wrap(e){const t=Object.create(b.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();r.__wbg_client_free(e)}constructor(e){var t=function(e,t){const n=t(1*e.length);return s().set(e,n/1),d=e.length,n}(e,r.__wbindgen_malloc),n=d,o=r.client_new(t,n);return b.__wrap(o)}new_game(e){var t=p(e,r.__wbindgen_malloc,r.__wbindgen_realloc),n=d;r.client_new_game(this.ptr,t,n)}next_turn(e,t,n){r.client_next_turn(this.ptr,e,t,n)}next_turn_noguess(){r.client_next_turn_noguess(this.ptr)}get_current_turn_json(){try{const n=r.__wbindgen_add_to_stack_pointer(-16);r.client_get_current_turn_json(n,this.ptr);var e=w()[n/4+0],t=w()[n/4+1];return c(e,t)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t)}}get_past_turns_json(){try{const n=r.__wbindgen_add_to_stack_pointer(-16);r.client_get_past_turns_json(n,this.ptr);var e=w()[n/4+0],t=w()[n/4+1];return c(e,t)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t)}}correct_guess_count(){return r.client_correct_guess_count(this.ptr)>>>0}get_secret_words(){try{const n=r.__wbindgen_add_to_stack_pointer(-16);r.client_get_secret_words(n,this.ptr);var e=w()[n/4+0],t=w()[n/4+1];return c(e,t)}finally{r.__wbindgen_add_to_stack_pointer(16),r.__wbindgen_free(e,t)}}}function h(e,t){return _(c(e,t))}function m(e){console.log(a(e))}function k(e){!function(e){const t=a(e);(function(e){e<36||(i[e]=u,u=e)})(e)}(e)}function v(){return _(new Error)}function C(e,t){var n=p(a(t).stack,r.__wbindgen_malloc,r.__wbindgen_realloc),o=d;w()[e/4+1]=o,w()[e/4+0]=n}function T(e,t){try{console.error(c(e,t))}finally{r.__wbindgen_free(e,t)}}function E(e,t){throw new Error(c(e,t))}},373:(e,t,n)=>{var r=n.w[e.id];e.exports=r,n(838),r[""]()}}]);